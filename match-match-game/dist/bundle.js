!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=14)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOW_LV=3,t.MID_LV=4,t.HIGH_LV=6},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.Game=function(){function e(t,i,n,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.leftPairs=t,this.level=t,this.theme=i,this.back=n,this.user=a,this.openedCards=0,this.alreadyClicked="",this.timer=s,this.results=""}return n(e,[{key:"getAlreadyClicked",value:function(){return this.alreadyClicked}},{key:"setAlreadyClicked",value:function(e){this.alreadyClicked=e}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.User=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.firstName=t,this.lastName=i,this.email=n,window.localStorage.setItem("firstName",t),window.localStorage.setItem("lastName",i),window.localStorage.setItem("email",n)}return n(e,[{key:"getFullName",value:function(){return this.firstName+" "+this.lastName}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.Timer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.startTime=new Date,this.seconds="00",this.minutes="00",this.hours="00"}return n(e,[{key:"getIdTimer",value:function(){return this.idTimer}},{key:"setIdTimer",value:function(e){this.idTimer=e}},{key:"getValue",value:function(){return this.hours+":"+this.minutes+":"+this.seconds}},{key:"setValue",value:function(e,t,i){this.seconds=i,this.minutes=t,this.hours=e}},{key:"getStartTime",value:function(){return this.startTime}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.TimerView=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timerValue=document.querySelector(".timer-value"),this.timerValue.textContent=t.getValue()}return n(e,[{key:"update",value:function(e){this.timerValue.textContent=e.getValue()}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainView=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0));t.MainView=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return n(e,[{key:"init",value:function(){this.sectionGreeting=document.querySelector(".greeting"),this.btnStart=document.querySelector("#idBtnStart"),this.sectionRegistration=document.querySelector(".registration"),this.registrationForm=document.querySelector("#registration-form"),this.regFirstName=document.querySelector("#firstName"),this.regLastName=document.querySelector("#lastName"),this.regEmail=document.querySelector("#email"),this.btnRegisterPlayer=document.querySelector("#idBtnNewPlayer"),this.user=document.querySelector("#registeredUser"),this.linkNewUser=document.querySelector("#toNewPlayer"),this.linkNewGame=document.querySelector("#toNewGame"),this.sectionWholeGame=document.querySelector(".whole-game"),this.sectionSelectGame=document.querySelector(".select-game"),this.gameLevel=document.querySelector(".game-level"),this.btnNewGame=document.querySelector("#idBtnNewGame"),this.sectionGame=document.querySelector(".game"),this.gameTable=document.querySelector(".game-table"),this.sectionCongratulations=document.querySelector(".game-congratulations")}},{key:"getCheckedImage",value:function(){return document.querySelector(":checked")}},{key:"showRegistration",value:function(){this.sectionGreeting.classList.add("not-displayed"),this.sectionRegistration.classList.add("block-display")}},{key:"returnToRegistration",value:function(){this.sectionRegistration.classList.contains("block-display")||(this.sectionRegistration.classList.add("block-display"),this.sectionWholeGame.classList.remove("block-display"),this.sectionWholeGame.classList.add("not-displayed"),this.sectionSelectGame.classList.contains("not-displayed")||(this.sectionSelectGame.classList.remove("block-display"),this.sectionSelectGame.classList.add("not-displayed")),this.sectionGame.classList.contains("not-displayed")||(this.sectionGame.classList.remove("block-display"),this.sectionGame.classList.add("not-displayed")),this.sectionCongratulations.classList.contains("not-displayed")||(this.sectionCongratulations.classList.remove("block-display"),this.sectionCongratulations.classList.add("not-displayed")),this.gameTable.classList.length>1&&this.gameTable.classList.remove(this.gameTable.classList.item(1))),this.emptyRegistrationSection()}},{key:"emptyRegistrationSection",value:function(){this.regFirstName.value="",this.regLastName.value="",this.regEmail.value=""}},{key:"showSelectGame",value:function(){this.sectionWholeGame.classList.remove("not-displayed"),this.sectionWholeGame.classList.add("block-display"),this.sectionRegistration.classList.remove("block-display"),this.sectionRegistration.classList.add("not-displayed"),this.sectionSelectGame.classList.remove("not-displayed")}},{key:"showOnlySelectGame",value:function(){this.sectionSelectGame.classList.contains("not-displayed")&&(this.sectionSelectGame.classList.remove("not-displayed"),this.sectionGame.classList.contains("block-display")&&(this.sectionGame.classList.remove("block-display"),this.sectionGame.classList.add("not-displayed")),this.sectionCongratulations.classList.contains("block-display")&&(this.sectionCongratulations.classList.remove("block-display"),this.sectionCongratulations.classList.add("not-displayed")),this.gameTable.classList.remove(this.gameTable.classList.item(1)))}},{key:"showGame",value:function(e){switch(console.log("showGame"),this.sectionSelectGame.classList.remove("block-display"),this.sectionSelectGame.classList.add("not-displayed"),this.sectionGame.classList.remove("not-displayed"),this.sectionGame.classList.add("block-display"),this.gameTable=document.querySelector(".game-table"),e){case a.LOW_LV:this.gameTable.classList.add("low-level");break;case a.MID_LV:this.gameTable.classList.add("middle-level");break;case a.HIGH_LV:this.gameTable.classList.add("middle-level")}}},{key:"updateUser",value:function(e){this.user.textContent=e}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.CardView=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"createCard",value:function(e,t){var i=document.createElement("div");i.classList.add("card");var n=document.createElement("div");n.classList.add("front");var a=document.createElement("div");a.classList.add("back");var s=document.createElement("img");s.classList.add("img-card"),s.setAttribute("src",e),n.appendChild(s);var r=document.createElement("img");return r.classList.add("img-card"),r.setAttribute("src",t),a.appendChild(r),i.appendChild(n),i.appendChild(a),i.classList.add("closed-card"),i}},{key:"addClickedData",value:function(e){e.data="clicked"}},{key:"removeClickedData",value:function(e){e.data=""}},{key:"openCard",value:function(e){e.classList.remove("closed-card"),e.classList.add("opened-card")}},{key:"closeCard",value:function(e){e.classList.remove("opened-card"),e.classList.add("closed-card")}},{key:"hideCard",value:function(e){e.classList.remove("opened-card"),e.classList.add("hidden")}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameView=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(6);t.GameView=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t}return n(e,[{key:"init",value:function(){this.gameTable=document.querySelector(".game-table"),this.gameCongratulations=document.querySelector(".game-congratulations"),this.gameSection=document.querySelector(".game"),this.score=document.querySelector("#score-content"),this.score.innerHTML="",this.cardView=new a.CardView}},{key:"updateTable",value:function(){this.gameTable.innerHTML="";for(var e=2*this.model.level,t=0;t<e;t++){var i=this.cardView.createCard(this.model.cards[t],this.model.back);this.gameTable.appendChild(i)}}},{key:"getOpenedCards",value:function(){return document.querySelectorAll(".opened-card .front")}},{key:"isCard",value:function(e){return e.classList.contains("img-card")}},{key:"showCongratulations",value:function(e){var t=this;this.gameSection.classList.remove("block-display"),this.gameSection.classList.add("not-displayed"),this.gameCongratulations.classList.remove("not-displayed"),this.gameCongratulations.classList.add("block-display"),e.forEach(function(e){var i=document.createElement("span");i.textContent=e.user;var n=document.createElement("span");n.textContent=e.level;var a=document.createElement("span");a.textContent=e.timer,t.score.appendChild(i),t.score.appendChild(n),t.score.appendChild(a)})}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.TimerController=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=i}return n(e,[{key:"startTimer",value:function(){this.model.setIdTimer(setInterval(this.increaseTimer.bind(this),1e3))}},{key:"increaseTimer",value:function(){var e=new Date-this.model.getStartTime(),t=Math.floor(e/1e3%60),i=Math.floor(e/1e3/60%60),n=Math.floor(e/36e5%24);t=t<=9?"0"+t:t,i=i<=9?"0"+i:i,n=n<=9?"0"+n:n,this.model.setValue(n,i,t),this.view.update(this.model)}},{key:"stopTimer",value:function(){clearInterval(this.model.idTimer)}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.Utils=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*Math.floor(e))}},{key:"isCurResultBetter",value:function(e,t){var i=e.split(":"),n=t.split(":");return!(parseInt(i[0])>parseInt(n[0]))&&(!(parseInt(i[1])>parseInt(n[1]))&&!(parseInt(i[2])>parseInt(n[2])))}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameController=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(0)),s=i(9);t.GameController=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=i,this.timerController=n}return n(e,[{key:"initListeners",value:function(){this.view.gameTable.addEventListener("click",this.clickCard.bind(this))}},{key:"clickCard",value:function(e){if(this.view.isCard(e.target)&&this.model.openedCards<2){var t=e.target.parentElement.parentElement;if(!t.data&&(this.view.cardView.addClickedData(t),this.view.cardView.openCard(t),this.model.openedCards++,2===this.model.openedCards)){var i=this.view.getOpenedCards();i[0].firstChild.getAttribute("src")===i[1].firstChild.getAttribute("src")?setTimeout(this.deletePair.bind(this,i),500):setTimeout(this.closePair.bind(this,i),500)}}}},{key:"closePair",value:function(e){var t=this;e.forEach(function(e){t.view.cardView.closeCard(e.parentNode),t.model.openedCards=0,t.view.cardView.removeClickedData(e.parentNode)})}},{key:"deletePair",value:function(e){var t=this;e.forEach(function(e){t.view.cardView.hideCard(e.parentNode)}),this.model.leftPairs--,this.model.openedCards=0,this.checkFinal()}},{key:"shuffle",value:function(){var e=[];if(this.model.level<a.HIGH_LV)for(var t=new Set,i=this.model.leftPairs;i>0;){for(var n=s.Utils.getRandomInt(a.HIGH_LV-1);t.has(n);)n=s.Utils.getRandomInt(a.HIGH_LV-1),console.log(n);t.add(n),e.push(this.model.theme.images[n]),e.push(this.model.theme.images[n]),i--}else this.model.theme.images.forEach(function(t){e.push(t),e.push(t)});e.forEach(function(t,i){var n=Math.floor(Math.random()*Math.floor(e.length-1)),a=[e[n],e[i]];e[i]=a[0],e[n]=a[1]}),this.model.cards=e,this.view.updateTable()}},{key:"checkFinal",value:function(){if(console.log("this.model.leftPairs="+this.model.leftPairs),0==this.model.leftPairs){console.log("final"),this.model.results={timer:this.model.timer.getValue(),user:this.model.user.getFullName(),level:this.model.level},this.destroy();var e=this.analyzeResults(this.model.results);this.view.showCongratulations(e),this.model=null,this.view=null}}},{key:"analyzeResults",value:function(e){var t=JSON.parse(window.localStorage.getItem("scores"));if(t){t=JSON.parse(window.localStorage.getItem("scores"));for(var i=0,n=0;n<t.length;n++){if(t[n].level<e.level){t.splice(n,0,e),i=1;break}if(t[n].level===e.level&&s.Utils.isCurResultBetter(e.timer,t[n].timer)){t.splice(n,0,e),i=1;break}}i||t.push(e),t.length>10&&(t=t.slice(0,10)),window.localStorage.setItem("scores",JSON.stringify(t))}else(t=[]).push(e),window.localStorage.setItem("scores",JSON.stringify(t));return t}},{key:"destroy",value:function(){this.timerController.stopTimer()}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PAW_PATROL={images:["assets/images/paw-patrol/front/chase.jpg","assets/images/paw-patrol/front/marshal.jpg","assets/images/paw-patrol/front/rocky.jpg","assets/images/paw-patrol/front/rubble.jpg","assets/images/paw-patrol/front/sky.jpg","assets/images/paw-patrol/front/zuma.jpg"],back:["assets/images/paw-patrol/back/back1.jpg","assets/images/paw-patrol/back/back2.jpg"]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainController=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=f(i(11)),s=i(10),r=i(8),o=i(7),l=i(5),c=i(4),u=i(3),d=i(2),m=f(i(0)),h=i(1);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}t.MainController=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainView=new l.MainView,this.init()}return n(e,[{key:"init",value:function(){this.addListeners()}},{key:"addListeners",value:function(){this.mainView.btnStart.addEventListener("click",this.showRegistration.bind(this)),this.mainView.btnRegisterPlayer.addEventListener("click",this.registerUser.bind(this)),this.mainView.btnNewGame.addEventListener("click",this.startGame.bind(this)),this.mainView.linkNewUser.addEventListener("click",this.returnToRegistration.bind(this)),this.mainView.linkNewGame.addEventListener("click",this.returnToSelectGame.bind(this))}},{key:"showRegistration",value:function(){this.mainView.showRegistration()}},{key:"returnToRegistration",value:function(){this.curGameController&&this.curGameController.destroy(),this.mainView.returnToRegistration()}},{key:"showSelectGame",value:function(){this.mainView.showSelectGame()}},{key:"returnToSelectGame",value:function(){this.curGameController.destroy(),this.mainView.showOnlySelectGame()}},{key:"showGame",value:function(){this.mainView.showGame()}},{key:"registerUser",value:function(e){if(this.mainView.registrationForm.checkValidity()){e.preventDefault();var t=this.mainView.regFirstName,i=this.mainView.regLastName,n=this.mainView.regEmail;this.curUser=new d.User(t.value,i.value,n.value),this.mainView.updateUser(this.curUser.getFullName()),this.mainView.showSelectGame()}}},{key:"startGame",value:function(){var e=this.mainView.getCheckedImage(),t=void 0,i=void 0;switch(this.mainView.gameLevel.selectedIndex){case 0:t=m.LOW_LV;break;case 1:t=m.MID_LV;break;case 2:t=m.HIGH_LV}switch(e.value){case"0":i=a.PAW_PATROL.back[0];break;case"1":i=a.PAW_PATROL.back[1]}this.mainView.showGame(t);var n=new u.Timer,l=new c.TimerView(n);this.curTimerController=new r.TimerController(n,l),this.curTimerController.startTimer();var d=new h.Game(t,a.PAW_PATROL,i,this.curUser,n),f=new o.GameView(d);f.init(),this.curGameController=new s.GameController(d,f,this.curTimerController),this.curGameController.initListeners(),this.curGameController.shuffle()}}]),e}()},function(e,t,i){"use strict";new(i(12).MainController)},function(e,t,i){"use strict";i(13)}]);